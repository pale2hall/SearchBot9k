<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>SearchBot9k</title>
    <style>
      html,
      body {
        justify-content: space-between;
        position: relative;
        background-color: #008080; /* Windows 95 green background */
        width: 100%;
        height: 100%;
        font-family: "MS Sans Serif", Geneva, sans-serif;
      }

      #left-pane,
      #right-pane {
        width: 75vw;
        height: 75vh;
        z-index: 1;
      }

      #left-pane:hover {
        z-index: 1000;
      }

      #right-pane:hover {
        z-index: 1000;
      }

      #left-pane {
        position: absolute;
        top: 3vh;
        left: 3vw;
      }

      #right-pane {
        margin-left: 20px;
        color: lime; /* Green text color */
        position: absolute;
        top: 22vh;
        left: 22vw;
        background-color: #d2d2d2;
    padding: 5px;
    padding-bottom: 1em;
      }

      pre {
        white-space: pre-wrap;
        word-wrap: break-word;
      }

      #left-pane img {
        /* resize image so it fits within the height and width but is as wide or tall as possible without chanigg aspect ratio */
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        box-sizing: border-box; /* Include border in the element's dimensions */
        background-color: #222;
        background-size: 50% 50%;
        background-position: center;
      }
      #url, .title-bar {
        background-color: #000080; 
        color:white;
        font-weight:bold;
      }
      #messages{
        background-color: #000;
        color: greenyellow;
        margin-right: 14px;
        max-height: 95%;
        overflow: scroll;
      }
      #browser, #right-pane{
        background-color: #d2d2d2;
    padding: 5px;
    padding-bottom: 1em;
      }
    </style>
  </head>
  <body>
    <div id="left-pane">
      <div id="browser">
        <div id="url">
          <input type="text" disabled value="http://url goes here eventually" />
        </div>
        <img id="webpage-image" src="" alt="Web page screenshot" />
      </div>
    </div>
    <div id="right-pane">
        <div class="title-bar"> <img src="./spinner.gif" style="height:1.5em;width:auto;"> ChatGPT Message Log</div>
            
      <pre id="messages"></pre>
    </div>
    <script>
      // Function to scroll to the bottom of the right panel
      function scrollToBottom() {
        const rightPane = document.getElementById("right-pane");
        rightPane.scrollTop = rightPane.scrollHeight;
      }

      // Call the function to scroll to the bottom on every update
      window.electron.onUpdateMessages((_, messages) => {
        document.getElementById("messages").textContent = messages
          .map((message) => `${message.role}: ${message.content}`)
          .join("\n\n==========\n\n");
        scrollToBottom();
      });
      window.electron.onUpdateWebPageImage((_, base64Image) => {
        document.getElementById(
          "webpage-image"
        ).src = `data:image/png;base64,${base64Image}`;
      });
    </script>
  </body>
</html>
